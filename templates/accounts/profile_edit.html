{% extends 'base.html' %}
{% load static %}

{% block content %}


<section class="section-pagetop bg">
    <div class="container">
        <h2 class="title-page">Edit account</h2>
    </div> <!-- container //  -->
    </section>
<div class="container">

    <div class="row">
        
        <main class="col-md-9">
                <article class="card">
                    <header class="card-header">
                        <strong class="d-inline-block mr-3">Logged in as: </strong>
                        <span>{{user.full_name}}</span> 
                    </header>
            <div class="card-body">   
                {% comment %} <div> 
                    <img src="{{userprofile.profile_picture.url}}  " alt="Profile Picture" width="100" style="border-radius">
                </div>     {% endcomment %}
                <div class="row">
                    <div class="col-md-12">
                        <form class="mx-1 mx-md-4" method="POST" action="{% url 'register' %}">
                            {% csrf_token %}
                            <div class="form-row">
                                <div class="col form-group col-md-6">
                                    <label>First name</label>
                                    {{ user_form.first_name }}
                                </div>
                                <div class="col form-group col-md-6">
                                    <label>Last name</label>
                                    {{ user_form.last_name }}
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label>Phone Number</label>
                                    {{ user_form.phone_number }}
                                    
                                </div>
                                <div class="form-group col-md-6">
                                    <label>Profile Picture</label>
                                    {{ profile_form.photo }}
                                
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label>Address</label>
                                    {{ profile_form.address }}
                                
                                </div>
                                <div class="form-group col-md-6" >
                                    <label>City</label>
                                    {{ profile_form.city }}
                                
                                </div>
                                <div class="form-group col-md-6">
                                    <label>Country</label>
                                    {{ profile_form.country }}
                                
                                </div>
                            </div>
                     
                            <input type="submit" value="Save" class="btn btn-bd-purple">        

                            
                        </form>
                    </div>
                </div>
            </div>	
        </article> <!-- card.// -->
    
        </main> <!-- col.// -->
    </div>
    
    
    </div> <!-- container .//  -->



<script>
    
    // This updates the avatar
    const fileInput = document.querySelector('input[type="file"]');

    fileInput.addEventListener('change', (event) => {
    const file = event.target.files[0];
    const image = document.querySelector('#avatar');

    if (file && file.type.includes('image')) {
        const url = URL.createObjectURL(file);
        image.src = url;
    }
    });

    // This updates the name
    const display_nameInput = document.getElementById('id_displayname');
    const display_nameOutput = document.getElementById('displayname');

    display_nameInput.addEventListener('input', (event) => {
        display_nameOutput.innerText = event.target.value;
    });

</script>

{% endblock %}